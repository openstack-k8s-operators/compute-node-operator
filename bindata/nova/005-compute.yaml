apiVersion: nova.openstack.org/v1beta1
kind: NovaCompute
metadata:
  name: nova-compute-{{ .WorkerOspRole }}
  namespace: openstack
spec:
  commonConfigMap: {{ .CommonConfigMap }}
  ospSecrets: {{ .OspSecrets }}
  {{ if not (eq .NovaComputeCPUDedicatedSet "") }}
  novaComputeCpuDedicatedSet: {{ .NovaComputeCPUDedicatedSet }}
  {{ end }}
  {{ if not (eq .NovaComputeCPUSharedSet "") }}
  novaComputeCpuSharedSet: {{ .NovaComputeCPUSharedSet }}
  {{ end }}
  {{ if not (eq .NovaReservedHostMemory 0) }}
  novaReservedHostMemory: {{ .NovaReservedHostMemory }}
  {{ end }}
  novaComputeImage: docker.io/tripleotrain/rhel-binary-nova-compute:current-tripleo
  roleName: {{ .WorkerOspRole }}
  serviceAccount: nova
